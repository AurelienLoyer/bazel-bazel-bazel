:revealjsdir: https://cdn.rawgit.com/hakimel/reveal.js/3.8.0/
:revnumber: {project-version}
:example-caption!:
ifndef::imagesdir[:imagesdir: images]
:docinfo: shared
:navigation:
:menu:
:header_footer: true
:status:
:slideNumber: true
:showSlideNumber: true
:title-slide-transition: zoom
:title-slide-transition-speed: fast
:icons: font
:revealjs_history: true

[.black.background]
== !

[.notes]
--
Nous sommes à une epoque ou la taille de nos projet est de plus en grande, le nombre de dependances grossit de jour en jour, ou encore la duree d'un build et de nots tests sont trop long pour avoir un feedback rapidement. Nous ne sommes pas les seuls a avoir ce problème. En effet, des grosses sociétes se sont penchés sur le sujet, et notamment Google qui propose ...
--

== !

image::bazel.png[]

[.notes]
--
l'outil open-source Bazel que nous allons vous présenter aujourd'hui
--

[.speaker]
=== !

[id="speaker-bio"]
--
Emmanuel DEMEY

Developer Advocate à Zenika Lille 

@EmmanuelDemey
--

image::emmanuel.jpg[]

[.speaker]
=== !

[id="speaker-bio"]
--
Aurélien LOYER

Consultant à Zenika Lille 

@AurelienDemey
--

image::aurelien.jpeg[]

== Qui l'utilise ?

* Google 
* Elastic
* Wix

[.notes]
--
TODO : Trouver d'autres societes
--

== !

image::google_codebase.png[]

[.notes]
--
Bazel est donc un outil de build créé par Google, au début pour un usage interne. En effet, il est utilisé, sous un nom different Blaze, depuis plusieurs année sur leur monorepo contenant presque la totalité des projets dévéloppés par Google voir même les dépendances et les outils utiliseé. 
Bien evidemment, Google à mis en place de nombreux outils pour faciliter et rendre possible l'utilisation d'un mono repo pour les developpeurs
--


== Google

[.column]
* Piper
* CiTC
* Critique
* Codesearch

[.column]
* Tricorder
* Presubmit
* TAP
* Rosie

[.notes]
--
Nous avons par exemple ces outils qui on en charge de faciliter l'utilisation du mono repo chez Google
--

== !

NOTE: Build and test software of any size, quickly and reliably.

[.notes]
--
Et donc l'une des brique primordial est Bazel. Afin de partir sur des bonnes bases, nous allons définir tout d'abord 
--

== !

[.notes]
--
TODO: Mettre le logo d'angular
Parler que nous aurions pu faire juste une demo d'angular avec bazel, mais cela n'aurait pas permis de comprendre la syntaxe. 
Mais faire tout de mmeme une demo d'angular cli avec le support Bazel pour montrer le support et le fait que cela ne change rien pour l'utilisateur
--

== Caracteristiques

* Sandboxed
* Incremental

[.notes]
--
Parler du remote execution
--

== Terminologie

* workspace
* package
* target
* rule
* label
* extension

[.notes]
--
--

== Getting Started

[.notes]
--
TODO: 
- Screenshot d'un arbo bazel avec un WORKSPACE et des fichiers BUILD
- Parler de la granularité a utiliser. comme mave ? ou une granulatie plus petite. on gagne en performance, mais on perd en maintenabilite
--

== Starlark

[.notes]
--
TODO: 
- Presenter Starlark
--

== Starlark

[.notes]
--
TODO: 
- Mettre le contenu d'un fichier bzl. Pour montrer que c'est tres complique et que nous allons preferer utiliser des rules predefinies
--

== Multi Langage

[.notes]
--
TODO: Mettre la liste des language supportes
TODO : Parler d'extensibilite
--

== Fonctions pures

[source,javascript]
----
function sum( a:number, b: number): number {
    return a + b;
}
const result = sum(1 + 2);
----

[.notes]
--
--

== Fonctions pures

[source,javascript]
----
function sum( a:number, b: number): number {
    return a + b;
}

function mult( a:number, factor: number): number {
    return a * factor;
}

const result = mult( sum(1, 2), 3);
----

[.notes]
--
--

== Fonctions pures

image::deps.svg[]

[.notes]
--
- DEMO Presenter le graph du projet angular
bazel query "deps(//packages/http)" --output graph | dot -Tpng > /tmp/dep.png
open /tmp/dep.png 
--

== Les labels

* //foo/bar:wiz	
* //foo/bar
* //foo/bar:all
* //foo/...

[.notes]
--
--

== Les labels

Si je suis dans le répertoire `foo`

* :foo == //foo:foo.
* bar:wiz == //foo/bar:wiz.
* bar/wiz == //foo/bar/wiz:wiz.

[.notes]
--
--

== Cheatsheet

[.notes]
--
TODO: 
- appeler gen_rule
--


== Cheatsheet

[.notes]
--
TODO: 
- appeler gen_rule apres une autre genrule pour montrer la dependances
--

== Macro

== Custom rules

[.notes]
--
TODO: 
- Mettre le code de la regle BZL ici 
- Montrer comment charger le fichier 
- Montrer le parametrage d'une regle custom 
--

== Demo

[.notes]
--
TODO: 
--

== Conclusion

[.notes]
--
TODO: 
- Ajouter un diff GIT pour montrer les fichiers ajoutés
- Support dans Angular CLI 
- Builder en remote avec plus core 
Ce n'est pas pour tout le monde
Pour un startup ou un nouveau projet, ne pas choisir bazel
Choisir une solution historique. si le projet grossit, eventuellement .

Ecosysteme plus large
Syntaxe a simplifier 
Documentation
Creer de l'outillage pour faciliter la migraton. Un plugin existe deja pour migrer maven, et gazelle pour le monde nodejs
--
